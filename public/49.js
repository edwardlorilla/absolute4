webpackJsonp([49],{437:function(e,t,a){var s=a(36)(a(847),a(848),!1,null,null,null);e.exports=s.exports},847:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{changeSignature:!!this.$root.store.state.user.file,option:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"}}},methods:{dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(t.length),r=new Uint8Array(s),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Blob([s],{type:a})},clear:function(){this.$refs.signature.clear()},undo:function(){this.$refs.signature.undo()},save:function(){var e=this,t=e.$refs.signature.save(),a=new FormData;a.append("file",e.dataURItoBlob(t),"file.png"),a.append("photo",e.$root.store.state.user.file),axios.post("/api/users/sign",a).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isDisabled=!1,e.dialogVisible=!1,e.changeSignature=!0,e.$root.store.state.user.file=t.data.file}).catch(function(t){console.log(t),t&&t.response.data.errors&&t.response.data.message&&e.$message({message:t.response.data.message,type:"error"}),e.isDisabled=!1})}}}},848:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{ref:"form",staticClass:"form-horizontal"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[e._v("User Signature")]),e._v(" "),a("div",{staticStyle:{display:"block","margin-right":"auto","margin-left":"auto",border:"1px solid #000000"}},[e.changeSignature?a("img",{attrs:{height:"200px",width:"400px",src:"/storage/images/"+e.$root.store.state.user.file,alt:"user-signature"}}):a("vue-signature",{ref:"signature",attrs:{sigOption:e.option,w:"400px",h:"200px"}})],1)])]),e._v(" "),a("div",{staticClass:"card-footer"},[e.changeSignature?a("div",[a("el-button",{attrs:{type:"success"},on:{click:function(t){e.changeSignature=!e.changeSignature}}},[e._v("Edit Signature")])],1):a("div",[a("el-button",{on:{click:function(t){e.changeSignature=!e.changeSignature}}},[e._v("Cancel")]),e._v(" "),a("el-button",{on:{click:e.clear}},[e._v("Clear")]),e._v(" "),a("el-button",{on:{click:e.undo}},[e._v("Undo")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("Confirm")])],1)])])},staticRenderFns:[]}}});