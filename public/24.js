webpackJsonp([24],{1003:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=i(837),o=(a=n)&&a.__esModule?a:{default:a};t.default={beforeCreate:function(){axios.get("/api/supplies/mass-update")},components:{EditSupplies:o.default},data:function(){return{isDisabled:!1,option:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"},request_id:1,dialogVisible:!1,optionDivision:[],loadingDivision:!1,selectDivision:!1,isAddDivision:!1,division_name:"",division_supply:"",select:!1,cloneQuantity:0,addTable:{id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""},columns:[{id:"name",label:"Transactions Name"},{id:"category_id",label:"Category Name"},{id:"package_id",label:"Unit"},{id:"quantity",label:"Current Stock"},{id:"out_quantity",label:"Quantity"}],form:{supplies:[],division:"",request_date:"",request_year_code:""},loading:!1,options:[],labelPosition:"left",errors:[]}},methods:{addDivision:function(){var e=this;e.isDisabled=!0,axios.post("/api/divisions",{name:e.division_name,supply_division:e.division_supply}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isAddDivision=!1,e.isDisabled=!1,e.optionDivision.push({value:t.data.id,label:t.data.name}),e.form.division=t.data.id}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.$message({message:t.response.data.message,type:"error"}),e.isAddDivision=!1),e.isDisabled=!1})},onSubmitRequest:function(){var e=this,t=new Date,i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();e.isDisabled=!0,e.errors=[],e.form.year=i,e.form.request_date=a+"/"+n+"/"+i,e.form.request_year_code=i,axios({method:e.$route.params.id?"PUT":"POST",url:"/api/"+(e.$route.params.id?e.$route.meta.url+"/"+e.$route.params.id:e.$route.meta.url+"?type=0"),data:e.form}).then(function(t){e.$message({message:"Your request of office supply currently under review.",type:"success"}),e.isDisabled=!1,e.form={supplies:[],name:"",year:"",request_date:"",request_year_code:""},e.dialogVisible=!0,e.request_id=t.data.id,e.$root.store.dispatch("loadNotification")}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.errors=t.response.data.errors,e.$message({message:t.response.data.message,type:"error"})),e.isDisabled=!1})},onChangeOutQuantity:function(e,t){var i=this,a=_.isInteger(e)?e:0,n=_.isInteger(t)?t:0;_.isInteger(a)&&_.isInteger(n)?a>n?i.addTable.quantity-=a-n:i.addTable.quantity+=n-a:i.addTable.quantity=i.cloneQuantity,i.errors.division&&i.$confirm("No division assigned, please contact your administrator","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"})},onChange:function(e){var t=this;t.select=!0,e?(t.addTable={id:e.id,name:e.name,description:e.description,quantity:e.quantity,out_quantity:0},t.cloneQuantity=e.quantity,t.select=!1):(t.addTable={id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""},t.cloneQuantity=0,t.select=!1)},addColumn:function(){var e="Please input the",t=this;t.addTable.id&&t.addTable.name&&t.addTable.out_quantity?axios.get("/api/supplies/disabled/"+t.addTable.id).then(function(e){t.form.supplies.unshift(_.clone(t.addTable)),t.options=[],t.addTable={id:"",name:"",quantity:"",out_quantity:""}}):(t.addTable.id&&(e+=" ID |"),t.addTable.name&&(e+=" Name |"),t.$message({message:e,type:"warning"}))},onSearchDivision:_.debounce(function(e,t){axios.get("/api/search/divisions?search="+e).then(function(e){t.loadingDivision=!1,t.optionDivision=e.data.map(function(e){return{value:e.id,label:e.name}})}).catch(function(){t.loadingDivision=!1})},350),onSearch:_.debounce(function(e,t){t.loading=!0,axios.get("/api/search/supplies?search="+e+"&type=0").then(function(e){t.loading=!1,t.options=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),searchDivision:function(e){var t=this;""!==e?(t.loadingDivision=!0,t.onSearchDivision(e,t)):(t.loadingDivision=!1,t.optionDivision=[])},search_:function(e){var t=this;""!==e?(t.loading=!0,t.onSearch(e,t)):(t.loading=!1,t.option=[])}}}},1004:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,size:"mini",model:e.form},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("h3",[e._v("Add Items")]),e._v(" "),i("table",{staticClass:"table table-bordered"},[i("thead",[i("tr",[i("th",[e._v("Product Name")]),e._v(" "),i("th",[e._v("Current Stock")]),e._v(" "),i("th",[e._v("Quantity")]),e._v(" "),i("th",[e._v("Action")])])]),e._v(" "),i("tbody",[i("tr",[i("td",[i("el-select",{attrs:{disabled:e.select,remote:"","value-key":"id",clearable:"",filterable:"",placeholder:"Please enter a keyword","remote-method":e.search_,loading:e.loading},on:{change:e.onChange},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}},e._l(e.options,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("td",[i("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.addTable.quantity,callback:function(t){e.$set(e.addTable,"quantity",t)},expression:"addTable.quantity"}})],1),e._v(" "),i("td",[i("el-input-number",{attrs:{min:0,max:e.cloneQuantity},on:{change:e.onChangeOutQuantity},model:{value:e.addTable.out_quantity,callback:function(t){e.$set(e.addTable,"out_quantity",t)},expression:"addTable.out_quantity"}})],1),e._v(" "),i("td",[i("el-button",{attrs:{type:"primary",disabled:0===e.addTable.out_quantity},on:{click:e.addColumn}},[e._v("Add\n                        ")])],1)]),e._v(" "),e._l(e.form.supplies,function(e,t){return i("edit-supplies",{key:t,attrs:{max:e.cloneQuantity,item:e}})})],2)])])]),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:!e.form.supplies.length,loading:e.isDisabled},on:{click:e.onSubmitRequest}},[e._v("Submit\n        ")]),e._v(" "),i("el-button",{attrs:{loading:e.isDisabled},on:{click:function(t){e.$router.push("/"+e.$route.meta.url)}}},[e._v("Back")])],1)],1)},staticRenderFns:[]}},801:function(e,t,i){var a=i(36)(i(1003),i(1004),!1,null,null,null);e.exports=a.exports},837:function(e,t,i){var a=i(36)(i(838),i(839),!1,null,null,null);e.exports=a.exports},838:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["item","max"],data:function(){return{edit_:!1}},methods:{onChangeOutQuantity:function(e,t){_.isInteger(e)?e>t?this.item.quantity-=e-(t||0):this.item.quantity+=(t||0)-e:this.item.quantity=this.max},onEdit:function(){this.edit_=!this.edit_}}}},839:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[i("td",[e.edit_?i("el-input",{attrs:{placeholder:"Product Name"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}):i("label",[e._v(e._s(e.item.name))])],1),e._v(" "),i("td",[e.edit_?i("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.item.quantity,callback:function(t){e.$set(e.item,"quantity",t)},expression:"item.quantity"}}):i("label",[e._v(e._s(e.item.quantity))])],1),e._v(" "),i("td",[e.edit_?i("el-input-number",{attrs:{min:0,max:e.max},on:{change:e.onChangeOutQuantity},model:{value:e.item.out_quantity,callback:function(t){e.$set(e.item,"out_quantity",t)},expression:"item.out_quantity"}}):i("label",[e._v(e._s(e.item.out_quantity))])],1),e._v(" "),i("td",[i("el-button",{attrs:{type:"primary"},on:{click:e.onEdit}},[e._v(e._s(e.edit_?"Done":"Edit"))])],1)])},staticRenderFns:[]}}});