webpackJsonp([14,18],{272:function(e,t,a){var i=a(36)(a(830),a(833),!1,null,null,null);e.exports=i.exports},781:function(e,t,a){var i=a(36)(a(876),a(877),!1,null,null,null);e.exports=i.exports},823:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{isDisabled:!1,labelPosition:"left",errors:[]}},beforeRouteEnter:function(e,t,a){e.params.id?axios.get("/api/"+e.meta.url+"/"+e.params.id).then(function(e){a(function(t){return t.setData(e.data)})}):a()},beforeRouteUpdate:function(e,t,a){var i=this;e.params.id?axios.get("/api/"+e.meta.url+"/"+e.params.id).then(function(e){i.setData(e.data),a()}):a()},methods:{setData:function(e){var t=this;t.optionCustomer.push({value:e.customer.id,label:e.customer.name}),t.optionDoctor.push({value:e.doctor.id,label:e.doctor.name}),t.form={id:e.id,request_date:e.request_date,request_year_code:e.request_year_code,remark:e.remark,doctor:e.doctor.id,customer:e.customer.id,products:[]},_.map(e.transactions,function(e){var a=e.product;return axios.get("/api/products/disabled/"+a.id),t.form.products.unshift({id:a.id,transaction_id:e.id,name:a.name,category_id:a.category.name,quantity:a.quantity,cloneQuantity:a.quantity,out_quantity:e.out_quantity})})}}}},824:function(e,t,a){var i=a(36)(a(831),a(832),!1,null,null,null);e.exports=i.exports},830:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(a(823)),n=o(a(824));function o(e){return e&&e.__esModule?e:{default:e}}t.default={beforeCreate:function(){axios.get("/api/products/mass-update")},components:{EditProduct:n.default},mixins:[i.default],data:function(){return{option:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"},request_id:1,dialogVisible:!1,optionDivision:[],loadingDivision:!1,selectDivision:!1,isAddDivision:!1,division_name:"",division_supply:"",select:!1,cloneQuantity:0,addTable:{id:"",name:"",category_id:"",quantity:"",out_quantity:""},columns:[{id:"name",label:"Transactions Name"},{id:"category_id",label:"Category Name"},{id:"quantity",label:"Current Stock"},{id:"out_quantity",label:"Quantity"}],form:{products:[],division:"",request_date:"",request_year_code:""},loading:!1,options:[]}},methods:{addDivision:function(){var e=this;e.isDisabled=!0,axios.post("/api/divisions",{name:e.division_name,supply_division:e.division_supply,station:""}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isAddDivision=!1,e.isDisabled=!1,e.optionDivision.push({value:t.data.id,label:t.data.name}),e.form.division=t.data.id}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.$message({message:t.response.data.message,type:"error"}),e.isAddDivision=!1),e.isDisabled=!1})},onSubmitRequest:function(){var e=this,t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();e.isDisabled=!0,e.errors=[],e.form.year=a,e.form.request_date=i+"/"+n+"/"+a,e.form.request_year_code=a,axios({method:e.$route.params.id?"PUT":"POST",url:"/api/"+(e.$route.params.id?e.$route.meta.url+"/"+e.$route.params.id:""+e.$route.meta.url),data:e.form}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isDisabled=!1,e.form={products:[],name:"",year:"",request_date:"",request_year_code:""},e.dialogVisible=!0,e.request_id=t.data.id,e.$router.push({name:"requests.print",params:{id:e.request_id}})}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.errors=t.response.data.errors,e.$message({message:t.response.data.message,type:"error"})),e.isDisabled=!1})},onChangeOutQuantity:function(e,t){e>t?this.addTable.quantity-=e-t:this.addTable.quantity+=t-e},onChange:function(e){var t=this;t.select=!0,e?(t.addTable={id:e.id,name:e.medicine.name,category_id:e.category?e.category.name:"",package_id:e.package?e.package.name:"",quantity:e.quantity,out_quantity:0},t.cloneQuantity=e.quantity,t.select=!1):(t.addTable={id:"",name:"",category_id:"",quantity:"",out_quantity:""},t.cloneQuantity=0,t.select=!1)},onChangeProduct:function(e){this.product=e.value},onChangeProductOut:function(){this.addTable.name||(this.product={})},addColumn:function(){var e="Please input the",t=this;t.addTable.id&&t.addTable.name&&t.addTable.category_id&&t.addTable.out_quantity?axios.get("/api/products/disabled/"+t.addTable.id).then(function(e){t.form.products.unshift(_.clone(t.addTable)),t.options=[],t.addTable={id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""}}):(t.addTable.id&&(e+=" ID |"),t.addTable.name&&(e+=" Name |"),t.addTable.category_id&&(e+=" Category |"),t.$message({message:e,type:"warning"}))},onSearchDivision:_.debounce(function(e,t){axios.get("/api/search/divisions?search="+e).then(function(e){t.loadingDivision=!1,t.optionDivision=e.data.map(function(e){return{value:e.id,label:e.name}})}).catch(function(){t.loadingDivision=!1})},350),onSearch:_.debounce(function(e,t){t.loading=!0,axios.get("/api/search/request-medicine?search="+e).then(function(e){t.loading=!1,t.options=_.map(e.data,function(e){return{value:e,label:e.medicine.name}})}).catch(function(){t.loading=!1})},350),searchDivision:function(e){var t=this;""!==e?(t.loadingDivision=!0,t.onSearchDivision(e,t)):(t.loadingDivision=!1,t.optionDivision=[])},search_:function(e){var t=this;""!==e?(t.loading=!0,t.onSearch(e,t)):(t.loading=!1,t.options=[])}}}},831:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["item","max"],data:function(){return{edit_:!1}},methods:{onChangeOutQuantity:function(e,t){e>t?this.item.quantity-=e-t:this.item.quantity+=t-e},onEdit:function(){this.edit_=!this.edit_}}}},832:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",[e.edit_?a("el-input",{attrs:{placeholder:"Product Name"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}):a("label",[e._v(e._s(e.item.name))])],1),e._v(" "),a("td",[e.edit_?a("el-input",{attrs:{placeholder:"Category Name"},model:{value:e.item.category_id,callback:function(t){e.$set(e.item,"category_id",t)},expression:"item.category_id"}}):a("label",[e._v(e._s(e.item.category_id))])],1),e._v(" "),a("td",[e.edit_?a("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.item.quantity,callback:function(t){e.$set(e.item,"quantity",t)},expression:"item.quantity"}}):a("label",[e._v(e._s(e.item.quantity))])],1),e._v(" "),a("td",[e.edit_?a("el-input-number",{attrs:{min:0,max:e.max},on:{change:e.onChangeOutQuantity},model:{value:e.item.out_quantity,callback:function(t){e.$set(e.item,"out_quantity",t)},expression:"item.out_quantity"}}):a("label",[e._v(e._s(e.item.out_quantity))])],1),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary"},on:{click:e.onEdit}},[e._v(e._s(e.edit_?"Done":"Edit"))])],1)])},staticRenderFns:[]}},833:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,size:"mini",model:e.form},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-5"},[a("div",{staticClass:"form-group"},[e.isAddDivision?a("div",[a("div",{staticClass:"input-group input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.division_name,expression:"division_name"}],staticClass:"form-control",attrs:{placeholder:"Division Name",type:"text"},domProps:{value:e.division_name},on:{input:function(t){t.target.composing||(e.division_name=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.division_supply,expression:"division_supply"}],staticClass:"form-control",attrs:{placeholder:"Supply Division Name",type:"text"},domProps:{value:e.division_supply},on:{input:function(t){t.target.composing||(e.division_supply=t.target.value)}}}),e._v(" "),a("span",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addDivision}},[e._v("Create Division")]),e._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.isAddDivision=!1}}},[e._v("Cancel")])])])]):a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm"},[a("label",{staticClass:"el-form-item__label",attrs:{for:"division"}},[e._v("Division")])]),e._v(" "),a("div",{staticClass:"col-sm text-right"},[e.isAddDivision?e._e():a("button",{staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:function(t){e.isAddDivision=!e.isAddDivision}}},[e._v("Add Division\n                                ")])])]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.selectDivision,remote:"",clearable:"",filterable:"",placeholder:"Please enter a keyword","remote-method":e.searchDivision,"default-first-option":"",loading:e.loadingDivision},model:{value:e.form.division,callback:function(t){e.$set(e.form,"division",t)},expression:"form.division"}},e._l(e.optionDivision,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)])]),e._v(" "),a("div",{staticClass:"col-sm-12"},[a("h3",[e._v("Add Items")]),e._v(" "),a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",[e._v("Product Name")]),e._v(" "),a("th",[e._v("Category Name")]),e._v(" "),a("th",[e._v("Current Stock")]),e._v(" "),a("th",[e._v("Quantity")]),e._v(" "),a("th",[e._v("Action")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.select,remote:"","value-key":"id",clearable:"",filterable:"",placeholder:"Please enter a keyword","remote-method":e.search_,loading:e.loading},on:{change:e.onChange},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}},e._l(e.options,function(t,i){return a("el-option",{key:i,staticStyle:{padding:"0px"},attrs:{label:t.label,value:t.value}},[a("div",{on:{mouseover:function(a){e.onChangeProduct(t)},mouseleave:e.onChangeProductOut}},[a("span",{staticStyle:{padding:"0 20px"}},[e._v(e._s(""+t.label))])])])}))],1),e._v(" "),a("td",[a("el-input",{attrs:{type:"text",placeholder:"Category Name"},model:{value:e.addTable.category_id,callback:function(t){e.$set(e.addTable,"category_id",t)},expression:"addTable.category_id"}})],1),e._v(" "),a("td",[a("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.addTable.quantity,callback:function(t){e.$set(e.addTable,"quantity",t)},expression:"addTable.quantity"}})],1),e._v(" "),a("td",[a("el-input-number",{attrs:{min:0,max:e.cloneQuantity},on:{change:e.onChangeOutQuantity},model:{value:e.addTable.out_quantity,callback:function(t){e.$set(e.addTable,"out_quantity",t)},expression:"addTable.out_quantity"}})],1),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",disabled:0===e.addTable.out_quantity},on:{click:e.addColumn}},[e._v("Add\n                            ")])],1)]),e._v(" "),e._l(e.form.products,function(e,t){return a("edit-product",{key:t,attrs:{max:e.cloneQuantity,item:e}})})],2)])])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:0===e.form.products.length,loading:e.isDisabled},on:{click:e.onSubmitRequest}},[e._v(e._s(e.$route.meta.type)+"\n            ")]),e._v(" "),a("el-button",{attrs:{loading:e.isDisabled},on:{click:function(t){e.$router.push("/"+e.$route.meta.url)}}},[e._v("Back")])],1)],1)],1)},staticRenderFns:[]}},876:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(a(823)),n=o(a(824));function o(e){return e&&e.__esModule?e:{default:e}}t.default={beforeCreate:function(){axios.get("/api/products/mass-update")},components:{EditProduct:n.default},computed:{isDisabled_c:function(){return console.log(0===this.form.products.length),0===this.form.products.length}},mixins:[i.default],data:function(){return{optionCustomer:[],loadingCustomer:!1,select:!1,selectCustomer:!1,cloneQuantity:0,addTable:{id:"",name:"",category_id:"",quantity:"",out_quantity:""},columns:[{id:"name",label:"Transactions Name"},{id:"category_id",label:"Category Name"},{id:"package_id",label:"Unit"},{id:"quantity",label:"Current Stock"},{id:"out_quantity",label:"Quantity"}],form:{customer:"",products:[],name:"",year:"",request_date:"",request_year_code:"",remark:""},loading:!1,options:[]}},methods:{onSubmitRequest:function(){var e=this;e.isDisabled=!0,e.errors=[],axios.post("/api/"+e.$route.meta.url,e.form).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isDisabled=!1,e.form={products:[],name:"",year:"",request_date:"",request_year_code:"",remark:""},e.$router.push({name:"requests.print",params:{id:t.data.id}})}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.errors=t.response.data.errors,e.$message({message:t.response.data.message,type:"error"})),e.isDisabled=!1})},onChangeOutQuantity:function(e,t){e>t?this.addTable.quantity-=e-t:this.addTable.quantity+=t-e},onChange:function(e){var t=this;t.select=!0,e?(t.addTable={id:e.id,name:e.name,category_id:e.category.name,package_id:e.package.name,quantity:e.quantity,out_quantity:0},t.cloneQuantity=e.quantity,t.select=!1):(t.addTable={id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""},t.cloneQuantity=0,t.select=!1)},addColumn:function(){var e="Please input the",t=this;t.addTable.id&&t.addTable.name&&t.addTable.category_id&&t.addTable.package_id&&t.addTable.out_quantity?axios.get("/api/products/disabled/"+t.addTable.id).then(function(e){t.form.products.unshift(_.clone(t.addTable)),t.options=[],t.addTable={id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""}}):(t.addTable.id&&(e+=" ID |"),t.addTable.name&&(e+=" Name |"),t.addTable.category_id&&(e+=" Category |"),t.addTable.package_id&&(e+=" Package |"),t.$message({message:e,type:"warning"}))},onSearchCustomer:_.debounce(function(e,t){axios.get("/api/search/customers?search="+e).then(function(e){t.loadingCustomer=!1,t.optionCustomer=e.data.map(function(e){return{value:e.id,label:e.name}})}).catch(function(){t.loadingCustomer=!1})},350),onSearch:_.debounce(function(e,t){axios.get("/api/search/request-medicine?search="+e).then(function(e){t.loading=!1,t.options=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),search_:function(e){var t=this;""!==e?(t.loading=!0,t.onSearch(e,t)):(t.loading=!1,t.option=[])},searchCustomer:function(e){var t=this;""!==e?(t.loadingCustomer=!0,t.onSearch(e,t)):(t.loadingCustomer=!1,t.optionCustomer=[])}}}},877:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,size:"mini",model:e.form},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"el-form-item",class:e.errors.remark?"el-form-item--feedback is-error":""},[a("label",{staticClass:"el-form-item__label",attrs:{for:"remark"}},[e._v("Remark")]),e._v(" "),a("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"63px"}},[a("div",{staticClass:"el-input el-input--mini"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.remark,expression:"form.remark"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off"},domProps:{value:e.form.remark},on:{input:function(t){t.target.composing||e.$set(e.form,"remark",t.target.value)}}}),e._v(" "),e.errors.remark?a("span",{staticClass:"el-input__suffix"},[a("span",{staticClass:"el-input__suffix-inner"}),e._v(" "),a("i",{staticClass:"el-input__icon el-input__validateIcon el-icon-circle-close"})]):e._e()]),e._v(" "),e.errors.remark?a("div",{staticClass:"el-form-item__error"},[e._v("\n                        Please input the remark\n                    ")]):e._e()])])]),e._v(" "),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"el-form-item",class:e.errors.request_date?"el-form-item--feedback is-error":""},[a("label",{staticClass:"el-form-item__label",attrs:{for:"request_date"}},[e._v("Date")]),e._v(" "),a("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"el-input el-input--mini"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.request_date,expression:"form.request_date"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off"},domProps:{value:e.form.request_date},on:{input:function(t){t.target.composing||e.$set(e.form,"request_date",t.target.value)}}}),e._v(" "),e.errors.request_date?a("span",{staticClass:"el-input__suffix"},[a("span",{staticClass:"el-input__suffix-inner"}),e._v(" "),a("i",{staticClass:"el-input__icon el-input__validateIcon el-icon-circle-close"})]):e._e()]),e._v(" "),e.errors.request_date?a("div",{staticClass:"el-form-item__error"},[e._v("\n                        Please input the Request Data\n                    ")]):e._e()])])]),e._v(" "),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"el-form-item",class:e.errors.request_year_code?"el-form-item--feedback is-error":""},[a("label",{staticClass:"el-form-item__label",attrs:{for:"request_year_code"}},[e._v("Year Code")]),e._v(" "),a("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"73px"}},[a("div",{staticClass:"el-input el-input--mini"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.request_year_code,expression:"form.request_year_code"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off"},domProps:{value:e.form.request_year_code},on:{input:function(t){t.target.composing||e.$set(e.form,"request_year_code",t.target.value)}}}),e._v(" "),e.errors.request_year_code?a("span",{staticClass:"el-input__suffix"},[a("span",{staticClass:"el-input__suffix-inner"}),e._v(" "),a("i",{staticClass:"el-input__icon el-input__validateIcon el-icon-circle-close"})]):e._e()]),e._v(" "),e.errors.request_year_code?a("div",{staticClass:"el-form-item__error"},[e._v("\n                        Please input the Request Year Code\n                    ")]):e._e()])])]),e._v(" "),a("div",{staticClass:"col-sm-12"},[a("h3",[e._v("Add Items")]),e._v(" "),a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",[e._v("Product Name")]),e._v(" "),a("th",[e._v("Category Name")]),e._v(" "),a("th",[e._v("Current Stock")]),e._v(" "),a("th",[e._v("Quantity")]),e._v(" "),a("th",[e._v("Action")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("el-select",{attrs:{disabled:e.select,remote:"",clearable:"",filterable:"",placeholder:"Please enter a keyword","remote-method":e.search_,loading:e.loading},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{"value-key":e.value.id,label:e.label,value:e.value}})}))],1),e._v(" "),a("td",[a("el-input",{attrs:{type:"text",placeholder:"Category Name"},model:{value:e.addTable.category_id,callback:function(t){e.$set(e.addTable,"category_id",t)},expression:"addTable.category_id"}})],1),e._v(" "),a("td",[a("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.addTable.quantity,callback:function(t){e.$set(e.addTable,"quantity",t)},expression:"addTable.quantity"}})],1),e._v(" "),a("td",[a("el-input-number",{attrs:{min:0,max:e.cloneQuantity},on:{change:e.onChangeOutQuantity},model:{value:e.addTable.out_quantity,callback:function(t){e.$set(e.addTable,"out_quantity",t)},expression:"addTable.out_quantity"}})],1),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",disabled:0===e.addTable.out_quantity},on:{click:e.addColumn}},[e._v("Add\n                        ")])],1)]),e._v(" "),e._l(e.form.products,function(t,i){return a("edit-product",{key:i,attrs:{max:e.cloneQuantity,item:t}})})],2)])])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.isDisabled_c,loading:e.isDisabled},on:{click:e.onSubmitRequest}},[e._v(e._s(e.$route.meta.type))]),e._v(" "),a("el-button",{attrs:{disabled:e.isDisabled},on:{click:function(t){e.$router.push("/"+e.$route.meta.url)}}},[e._v("Cancel")])],1)],1)},staticRenderFns:[]}}});