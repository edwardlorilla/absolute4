webpackJsonp([20],{1016:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],a=!0,s=!1,n=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=i(840),o=(a=n)&&a.__esModule?a:{default:a};t.default={components:{EditSupplies:o.default},beforeCreate:function(){axios.get("/api/supplies/mass-update")},data:function(){return{isAddDivision:!1,isAddSource:!1,isAddReceive:!1,receive_select:"",division_select:"",source_select:"",sources:[],divisions:[],supplies:[],locations:[],cloneQuantity:0,loading:!1,options:[],select:!1,addTable:{id:"",name:"",quantity:"",out_quantity:"",remarks:""},isDisabled:!1,source_name:"",division_name:"",receive_name:"",division_supply:""}},methods:{postRequest:function(){var e=this;e.isDisabled=!0;var t=new FormData(e.$refs.form),i={},a=!0,n=!1,o=void 0;try{for(var r,l=t.entries()[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var c=s(r.value,2),d=c[0],u=c[1];i[d]=u}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}i.id=e.$route.params.id?e.$route.params.id:"",i.division_id=e.division_select,i.source_id=e.source_select,i.location_id=e.receive_select,i.supplies=e.supplies,axios.post("/api/requisitions",i).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isDisabled=!1,e.$router.push({name:"supplies.print_requisition",params:{id:t.data.id}})}).catch(function(t){e.$message({message:t.response.data.message,type:"error"}),e.isDisabled=!1})},addDivision:function(){var e=this;e.isDisabled=!0,axios.post("/api/divisions",{name:e.division_name,supply_division:e.division_supply}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isAddDivision=!1,e.isDisabled=!1}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.$message({message:t.response.data.message,type:"error"}),e.isAddDivision=!1),e.isDisabled=!1})},addReceive:function(){var e=this;e.isDisabled=!0,axios.post("/api/locations",{name:e.receive_name,type:1}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isAddReceive=!1,e.isDisabled=!1}).catch(function(t){t.response.data.errors&&t.response.data.message&&(e.$message({message:t.response.data.message,type:"error"}),e.isAddDivision=!1),e.isDisabled=!1})},addSource:function(){var e=this;e.isDisabled=!0,axios.post("/api/sources",{name:e.source_name}).then(function(t){e.$message({message:t.statusText,type:"success"}),e.isAddSource=!1,e.isDisabled=!1}).catch(function(t){t.response.data.errors&&t.response.data.message&&e.$message({message:t.response.data.message,type:"error"}),e.isAddDivision=!1,e.isDisabled=!1})},onChangeOutQuantity:function(e,t){e>t?this.addTable.quantity-=e-t:this.addTable.quantity+=t-e},addColumn:function(){var e="Please input the",t=this;t.addTable.id&&t.addTable.name&&t.addTable.out_quantity?axios.get("/api/supplies/disabled/"+t.addTable.id).then(function(e){t.supplies.unshift(_.clone(t.addTable)),t.options=[],t.addTable={id:"",name:"",quantity:"",out_quantity:""}}):(t.addTable.id&&(e+=" ID |"),t.addTable.name&&(e+=" Name |"),t.addTable.category_id&&(e+=" Category |"),t.addTable.package_id&&(e+=" Package |"),t.$message({message:e,type:"warning"}))},onChange:function(e){var t=this;t.select=!0,e?(t.addTable={id:e.id,name:e.name,quantity:e.quantity,out_quantity:0,type:0},t.cloneQuantity=e.quantity,t.select=!1):(t.addTable={id:"",name:"",category_id:"",package_id:"",quantity:"",out_quantity:""},t.cloneQuantity=0,t.select=!1)},onSearch:_.debounce(function(e,t){axios.get("/api/search/request-supply?search="+e).then(function(e){t.loading=!1,t.options=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),onSearchReceive:_.debounce(function(e,t){axios.get("/api/search/locations/requisitions?search="+e).then(function(e){t.loading=!1,t.locations=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),onSearchDivision:_.debounce(function(e,t){axios.get("/api/search/divisions?search="+e).then(function(e){t.loading=!1,t.divisions=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),onSearchSource:_.debounce(function(e,t){axios.get("/api/search/sources?search="+e).then(function(e){t.loading=!1,t.sources=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){t.loading=!1})},350),search_:function(e){var t=this;""!==e?(t.loading=!0,t.onSearch(e,t)):(t.loading=!1,t.option=[])},search_division:function(e){var t=this;""!==e?(t.loading=!0,t.onSearchDivision(e,t)):(t.loading=!1,t.divisions=[])},search_receive:function(e){var t=this;""!==e?(t.loading=!0,t.onSearchReceive(e,t)):(t.loading=!1,t.divisions=[])},search_source:function(e){var t=this;""!==e?(t.loading=!0,t.onSearchSource(e,t)):(t.loading=!1,t.sources=[])}}}},1017:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"card"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body"},[i("form",{ref:"form",attrs:{id:"myform"},on:{submit:function(t){return t.preventDefault(),e.postRequest(t)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"row"},[e._m(1),e._v(" "),i("div",{staticClass:"col-sm text-right"},[e.isAddDivision?e._e():i("button",{staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:function(t){e.isAddDivision=!e.isAddDivision}}},[e._v("Add Division\n                                        ")])])]),e._v(" "),e.isAddDivision?i("div",[i("div",{staticClass:"input-group input-group-sm"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.division_name,expression:"division_name"}],staticClass:"form-control",attrs:{placeholder:"Division Name",type:"text"},domProps:{value:e.division_name},on:{input:function(t){t.target.composing||(e.division_name=t.target.value)}}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.division_supply,expression:"division_supply"}],staticClass:"form-control",attrs:{placeholder:"Supply Division",type:"text"},domProps:{value:e.division_supply},on:{input:function(t){t.target.composing||(e.division_supply=t.target.value)}}}),e._v(" "),i("span",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addDivision}},[e._v("Create Division")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.isAddDivision=!1}}},[e._v("Cancel")])])])]):i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,filterable:"",remote:"",placeholder:"Enter Location Name","remote-method":e.search_division,loading:e.loading},model:{value:e.division_select,callback:function(t){e.division_select=t},expression:"division_select"}},e._l(e.divisions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value.id}})}))],1)]),e._v(" "),i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"row"},[e._m(2),e._v(" "),i("div",{staticClass:"col-sm text-right"},[e.isAddSource?e._e():i("button",{staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:function(t){e.isAddSource=!e.isAddSource}}},[e._v("Add Source\n                                    ")])])]),e._v(" "),e.isAddSource?i("div",[i("div",{staticClass:"input-group input-group-sm"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.source_name,expression:"source_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.source_name},on:{input:function(t){t.target.composing||(e.source_name=t.target.value)}}}),e._v(" "),i("span",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addSource}},[e._v("Create Source")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.isAddSource=!1}}},[e._v("Cancel")])])])]):i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,filterable:"",remote:"",placeholder:"Enter Location Name","remote-method":e.search_source,loading:e.loading},model:{value:e.source_select,callback:function(t){e.source_select=t},expression:"source_select"}},e._l(e.sources,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value.id}})}))],1)])]),e._v(" "),e._m(3),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"row"},[e._m(4),e._v(" "),i("div",{staticClass:"col-sm text-right"},[e.isAddReceive?e._e():i("button",{staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:function(t){e.isAddReceive=!e.isAddReceive}}},[e._v("Add Received By\n                                    ")])])]),e._v(" "),e.isAddReceive?i("div",[i("div",{staticClass:"input-group input-group-sm"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receive_name,expression:"receive_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.receive_name},on:{input:function(t){t.target.composing||(e.receive_name=t.target.value)}}}),e._v(" "),i("span",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addReceive}},[e._v("Create Receive")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.isAddReceive=!1}}},[e._v("Cancel")])])])]):i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,filterable:"",remote:"",placeholder:"Enter Receive Name","remote-method":e.search_receive,loading:e.loading},model:{value:e.receive_select,callback:function(t){e.receive_select=t},expression:"receive_select"}},e._l(e.locations,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value.id}})}))],1)])]),e._v(" "),i("table",{staticClass:"table table-bordered"},[e._m(5),e._v(" "),i("tbody",[i("tr",[i("td",[i("el-select",{attrs:{disabled:e.select,remote:"",clearable:"",filterable:"",placeholder:"Please enter a keyword","remote-method":e.search_,loading:e.loading},on:{change:e.onChange},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}},e._l(e.options,function(e,t){return i("el-option",{key:t,attrs:{"value-key":e.value.id,label:e.label,value:e.value}})}))],1),e._v(" "),i("td",[i("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.addTable.quantity,callback:function(t){e.$set(e.addTable,"quantity",t)},expression:"addTable.quantity"}})],1),e._v(" "),i("td",[i("el-input-number",{attrs:{min:0,max:e.cloneQuantity},on:{change:e.onChangeOutQuantity},model:{value:e.addTable.out_quantity,callback:function(t){e.$set(e.addTable,"out_quantity",t)},expression:"addTable.out_quantity"}})],1),e._v(" "),i("td",[i("el-input",{attrs:{type:"text",placeholder:"Remarks"},model:{value:e.addTable.remarks,callback:function(t){e.$set(e.addTable,"remarks",t)},expression:"addTable.remarks"}})],1),e._v(" "),i("td",[i("el-button",{attrs:{type:"primary",disabled:0===e.addTable.out_quantity},on:{click:e.addColumn}},[e._v("Add\n                            ")])],1)]),e._v(" "),e._l(e.supplies,function(e,t){return i("edit-supplies",{key:t,attrs:{max:e.cloneQuantity,item:e}})})],2)])])]),e._v(" "),e._m(6)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h3",[this._v("Add Items")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm"},[t("label",{attrs:{for:"division"}},[this._v("Division")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm"},[t("label",{attrs:{for:"source"}},[this._v("Source")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"office"}},[e._v("Office")]),e._v(" "),i("input",{staticClass:"form-control",attrs:{type:"text",id:"office",name:"office"}})])]),e._v(" "),i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"code"}},[e._v("Code")]),e._v(" "),i("input",{staticClass:"form-control",attrs:{type:"text",id:"code",name:"code"}})])]),e._v(" "),i("div",{staticClass:"col-sm"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"responsibilities"}},[e._v("Responsibilities")]),e._v(" "),i("input",{staticClass:"form-control",attrs:{type:"text",id:"responsibilities",name:"responsibilities"}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm"},[t("label",{attrs:{for:"receive"}},[this._v("Received By")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Supply Name")]),e._v(" "),i("th",[e._v("Current Quantity")]),e._v(" "),i("th",[e._v("Quantity")]),e._v(" "),i("th",[e._v("Remarks")]),e._v(" "),i("th",[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-footer"},[t("button",{staticClass:"btn btn-primary",attrs:{form:"myform"}},[this._v("Submit")])])}]}},805:function(e,t,i){var a=i(36)(i(1016),i(1017),!1,null,null,null);e.exports=a.exports},840:function(e,t,i){var a=i(36)(i(841),i(842),!1,null,null,null);e.exports=a.exports},841:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["item","max"],data:function(){return{edit_:!1}},methods:{onChangeOutQuantity:function(e,t){e>t?this.item.quantity-=e-t:this.item.quantity+=t-e},onEdit:function(){this.edit_=!this.edit_}}}},842:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[i("td",[e.edit_?i("el-input",{attrs:{placeholder:"Product Name"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}):i("label",[e._v(e._s(e.item.name))])],1),e._v(" "),i("td",[e.edit_?i("el-input",{attrs:{disabled:!0,type:"number",min:"0",max:"addTable.quantity",placeholder:"Current Quantity"},model:{value:e.item.quantity,callback:function(t){e.$set(e.item,"quantity",t)},expression:"item.quantity"}}):i("label",[e._v(e._s(e.item.quantity))])],1),e._v(" "),i("td",[e.edit_?i("el-input-number",{attrs:{min:0,max:e.max},on:{change:e.onChangeOutQuantity},model:{value:e.item.out_quantity,callback:function(t){e.$set(e.item,"out_quantity",t)},expression:"item.out_quantity"}}):i("label",[e._v(e._s(e.item.out_quantity))])],1),e._v(" "),i("td",[i("el-button",{attrs:{type:"primary"},on:{click:e.onEdit}},[e._v(e._s(e.edit_?"Done":"Edit"))])],1)])},staticRenderFns:[]}}});