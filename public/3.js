webpackJsonp([3],{152:function(e,i,t){var s=t(36)(t(919),t(920),!1,function(e){t(917)},null,null);e.exports=s.exports},917:function(e,i,t){var s=t(918);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(96)("2994efc4",s,!0,{})},918:function(e,i,t){(e.exports=t(30)(!1)).push([e.i,"",""])},919:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={data:function(){return{form:{medicine_id:"",medication:"",dosage:"",category_id:"",unit_cost:"",unit_id:"",dispensing_unit_id:"",reorder_point:9},unit_name:"",isAddUnit:!1,units:[],unit:{},dispensing_unit:{},dispensing_units:[],isAddDispensingUnit:!1,medicine_name:"",isAddMedicine:!1,racks:[],categories:[],packages:[],isDisabled:!1,labelPosition:"left",errors:[],medicines:[],loading:!1}},computed:{itemUnitCost:function(){return 0!=this.form.sale_rate&&0!=this.form.packs.item_pack?this.form.sale_rate/this.form.packs.item_pack:0},subItemSubCost:function(){return 0!=this.form.packs.item_pack&&0!=this.form.packs.sub_item?this.form.packs.item_pack*this.form.packs.sub_item:0}},beforeRouteEnter:function(e,i,t){e.params.id?axios.all([axios.get("/api/select"),axios.get("/api/"+e.meta.url+"/edit/"+e.params.id)]).then(axios.spread(function(e,i){t(function(t){var s=e.data;return t.categories=s.categories,t.packages=s.packages,t.racks=s.racks,t.units=[{value:i.data.unit,label:i.data.unit.name}],t.dispensing_units=[{value:i.data.dispensing_unit,label:i.data.dispensing_unit.name}],t.form=i.data,t.form.unit_id=i.data.unit,t.form.dispensing_unit_id=i.data.dispensing_unit})})):axios.all([axios.get("/api/select")]).then(axios.spread(function(e,i){t(function(i){var t=e.data;return i.categories=t.categories,i.packages=t.packages,i.racks=t.racks})}))},beforeRouteUpdate:function(e,i,t){var s=this;e.params.id?axios.all([axios.get("/api/select"),axios.get("/api/edit/"+e.meta.url+"/"+e.params.id)]).then(axios.spread(function(e,i){var a=e.data;s.categories=a.categories,s.packages=a.packages,s.racks=a.racks(s.units=[{value:i.data.unit,label:i.data.unit.name}]),s.dispensing_units=[{value:i.data.dispensing_unit,label:i.data.dispensing_unit.name}],s.form=i.data(s.form.unit_id=i.data.unit),s.form.dispensing_unit_id=i.data.dispensing_unit,t()})):axios.all([axios.get("/api/select")]).then(axios.spread(function(e){var i=e.data;s.categories=i.categories,s.packages=i.packages,s.racks=i.racks,t()}))},methods:{unit_m:function(e){return axios.post("/api/units",e)},addUnit:function(){var e=this;e.isDisabled=!0,e.errors=[],e.unit_m({name:e.unit_name}).then(function(i){e.$message({message:i.statusText,type:"success"}),e.units=[],e.units.push({value:i.data,label:i.data.name}),e.form.unit_id=i.data,e.isDisabled=!1,e.isAddUnit=!1,e.isAddDispensingUnit=!1}).catch(function(i){i.response.data&&i.response.data.errors&&i.response.data.message&&e.$message({message:i.response.data.message,type:"error"}),e.isDisabled=!1})},addDispensingUnit:function(){var e=this;e.isDisabled=!0,e.errors=[],e.unit_m({name:e.unit_name}).then(function(i){e.$message({message:i.statusText,type:"success"}),e.dispensing_units=[],e.dispensing_units.push({value:i.data,label:i.data.name}),e.form.dispensing_unit_id=i.data,e.isDisabled=!1,e.isAddDispensingUnit=!1}).catch(function(i){i.response.data&&i.response.data.errors&&i.response.data.message&&e.$message({message:i.response.data.message,type:"error"}),e.isDisabled=!1})},handleSidebar:function(){this.isAddMedicine=!this.isAddMedicine,this.$root.store.dispatch("handleSideBar")},addMedicine:function(){var e=this;e.isDisabled=!0,e.errors=[],e.isAddMedicine=!e.isAddMedicine,e.$root.store.dispatch("handleSideBar"),axios.post("/api/medicines",{name:e.medicine_name}).then(function(i){e.$message({message:i.statusText,type:"success"}),e.medicines=[],e.medicines.push({value:i.data,label:i.data.name}),e.form.medicine.id=i.data.id,e.isDisabled=!1}).catch(function(i){i.response&&i.response.data.errors&&i.response.data.message&&e.$message({message:i.response.data.message,type:"error"}),e.isDisabled=!1})},search_medicine:function(e){var i=this;""!==e?(i.loading=!0,i.onSearch(e,i)):(i.loading=!1,i.medicines=[])},onSearch:_.debounce(function(e,i){i.loading=!0,axios.get("/api/search/medicines?search="+e).then(function(e){i.loading=!1,i.medicines=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){i.loading=!1})},350),search_unit:function(e){var i=this;""!==e?(i.loading=!0,i.onSearchUnit(e,i)):(i.loading=!1,i.units=[])},onSearchUnit:_.debounce(function(e,i){i.getUnit(e).then(function(e){i.loading=!1,i.units=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){i.loading=!1})},350),search_dispensing_unit:function(e){var i=this;""!==e?(i.loading=!0,i.onSearchDispensingUnit(e,i)):(i.loading=!1,i.dispensing_units=[])},getUnit:function(e){return axios.get("/api/search/units?search="+e)},onSearchDispensingUnit:_.debounce(function(e,i){i.getUnit(e).then(function(e){i.loading=!1,i.dispensing_units=e.data.map(function(e){return{value:e,label:e.name}})}).catch(function(){i.loading=!1})},350),onSubmit:function(){var e=this;e.isDisabled=!0,e.errors=[];var i=e.$route.params.id;axios[i?"put":"post"]("/api/"+e.$route.meta.url+(i?"/"+i:""),e.form).then(function(i){e.$message({message:i.statusText,type:"success"}),e.isDisabled=!1}).catch(function(i){i.response.data.errors&&i.response.data.message&&(e.errors=i.response.data.errors,e.$message({message:i.response.data.message,type:"error"})),e.isDisabled=!1})}}}},920:function(e,i){e.exports={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"card"},[e._m(0),e._v(" "),t("div",{staticClass:"card-body"},[t("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,"label-width":"160px",model:e.form},nativeOn:{submit:function(i){return i.preventDefault(),e.onSubmit(i)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"el-form-item",class:e.errors.medicine_id?"is-error is-required":""},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm"},[t("label",{attrs:{for:"medicine_id"}},[e._v("Medicine/ Item Description")])]),e._v(" "),t("div",{staticClass:"col-sm text-right"},[e.isAddMedicine?e._e():t("button",{staticClass:"btn btn-sm btn-link",attrs:{type:"button"},on:{click:e.handleSidebar}},[e._v("Add Medicine\n                                        ")])])]),e._v(" "),t("div",{staticClass:"el-form-item__content"},[e.isAddMedicine?t("div",[t("div",{staticClass:"input-group input-group-sm"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.medicine_name,expression:"medicine_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.medicine_name},on:{input:function(i){i.target.composing||(e.medicine_name=i.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.addMedicine}},[e._v("Create Generic Medicine")]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(i){e.isAddMedicine=!1,e.$root.store.dispatch("handleSideBar")}}},[e._v("Cancel")])])])]):t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",remote:"",placeholder:"Enter Medicine Name","remote-method":e.search_medicine,loading:e.loading},model:{value:e.form.medicine_id,callback:function(i){e.$set(e.form,"medicine_id",i)},expression:"form.medicine_id"}},e._l(e.medicines,function(e,i){return t("el-option",{key:i,attrs:{label:e.label,value:e.value.id}})})),e._v(" "),e._l(e.errors.medicine_id,function(i){return e.errors.medicine_id?t("div",{staticClass:"el-form-item__error"},[e._v("\n                                        Generic, Medication, Dosage must be unique\n                                    ")]):e._e()})],2)]),e._v(" "),t("div",{staticClass:"el-form-item",class:e.errors.category_id?"is-error is-required":"",attrs:{label:"Form"}},[t("label",[e._v("Unit")]),e._v(" "),t("div",{staticClass:"el-form-item__content"},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.form.category_id,callback:function(i){e.$set(e.form,"category_id",i)},expression:"form.category_id"}},e._l(e.categories,function(e,i,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.id}})})),e._v(" "),e._l(e.errors.category_id,function(i){return e.errors.category_id?t("div",{staticClass:"el-form-item__error"},[e._v("\n                                        "+e._s(i)+"\n                                    ")]):e._e()})],2)]),e._v(" "),t("div",{staticClass:"el-form-item",class:e.errors.unit_cost?"is-error is-required":""},[t("label",{attrs:{for:"unit_cost"}},[e._v("Unit Cost")]),e._v(" "),t("div",{staticClass:"el-form-item__content"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.unit_cost,expression:"form.unit_cost"}],staticClass:"form-control form-control-sm",attrs:{required:"",type:"number",min:"1",id:"unit_cost",name:"unit_cost",placeholder:"Unit Cost"},domProps:{value:e.form.unit_cost},on:{input:function(i){i.target.composing||e.$set(e.form,"unit_cost",i.target.value)}}}),e._v(" "),e._l(e.errors.unit_cost,function(i){return e.errors.unit_cost?t("div",{staticClass:"el-form-item__error"},[e._v("\n                                        "+e._s(i)+"\n                                    ")]):e._e()})],2)]),e._v(" "),t("div",{staticClass:"el-form-item",class:e.errors.reorder_point?"is-error is-required":""},[t("label",{attrs:{for:"reorder_point"}},[e._v("Reorder Point")]),e._v(" "),t("div",{staticClass:"el-form-item__content"},[t("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"number",required:"",min:"1"},model:{value:e.form.reorder_point,callback:function(i){e.$set(e.form,"reorder_point",i)},expression:"form.reorder_point"}}),e._v(" "),e._l(e.errors.reorder_point,function(i){return e.errors.reorder_point?t("div",{staticClass:"el-form-item__error"},[e._v("\n                                        "+e._s(i)+"\n                                    ")]):e._e()})],2)])])]),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:!(e.form.medicine_id&&e.form.category_id&&e.form.reorder_point&&e.form.unit_cost),loading:e.isDisabled},on:{click:e.onSubmit}},[e._v("Save Information\n                        ")]),e._v(" "),t("el-button",{on:{click:function(i){e.$router.push("/"+e.$route.meta.url)}}},[e._v("Cancel")])],1)],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"card-header"},[i("h5",{staticClass:"m-0"},[this._v("Add New Medicine")])])}]}}});